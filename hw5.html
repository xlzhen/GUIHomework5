
<!DOCTYPE html>
<!--
Name: Xiaoling Zheng, xiaoling_zheng@student.uml.edu
Computer Science Department, UMass Lowell
COMP.4610, GUI Programming I
File: hw5.html
Created: 19-Nov-2017
Last updated by XZ: 19-Nov-2017, 23:20pm
Description: This is page provides interface on car financing comparisons. 
-->

<html lang = "en">
<head>
<meta charset="utf-8">

<title>Homework 5</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
        <link rel="stylesheet" href="hw5.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
        <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
        <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>
</head>

<body>
  
<h1> Homework5 </h1>    
    
<div class="container">
    <hr>      
    
    
    <form id="myform" onsubmit="return false">
        
        <p id = "instruction"> 
            * Please enter all required fields
        </p>
        
        <div class= "form-group row">
    
            <div class="col-xs-2"> <!--attribute-->
                <p class = "labels"> Car Price ($)</p>
            </div>
   
            <div class="col-xs-2"> 
                <input class="form-control" id="car_1" name = "car_1" type="number" step = 0.01 placeholder = "(required)" >               
            </div>    

            <div class="col-xs-2"> 
                <input class="form-control" id="car_2" name = "car_2" type="number" step = 0.01 placeholder = "(required)" >
            </div>
    
            <div class="col-xs-2"> 
                <input class="form-control" id="car_3" name = "car_3" type="number" step = 0.01 placeholder = "(required)" >    
            </div>

            <div class="col-xs-2"> 
                <input class="form-control" id="car_4" name = "car_4" type="number" step = 0.01 placeholder = "(required)" >  
            </div>
    
            <div class="col-xs-2"> 
                <input class="form-control" id="car_5" name = "car_5" type="number" step = 0.01 placeholder = "(required)" >
            </div>
    
        </div>
    
        <div class= "form-group row">   
            
            <div class="col-xs-2"> 
                <p class = "labels"> Mpg (mile/gallon)</p>
            </div>
   
            <div class="col-xs-2">    
                <input class="form-control" id= "mpg_1" name = "mpg_1" type="number" step = 0.01 placeholder = "(required)" >        
            </div>    

            <div class="col-xs-2"> 
                <input class="form-control" id= "mpg_2" name = "mpg_2" type="number" step = 0.01 placeholder = "(required)" >
            </div>
    
            <div class="col-xs-2"> 
                <input class="form-control" id= "mpg_3" name = "mpg_3" type="number" step = 0.01 placeholder = "(required)" >
            </div>

            <div class="col-xs-2"> 
                <input class="form-control" id= "mpg_4" name = "mpg_4" type="number" step = 0.01 placeholder = "(required)" >
            </div>
    
            <div class="col-xs-2"> <!--start range-->
                <input class="form-control" id= "mpg_5" name = "mpg_5" type="number" step = 0.01 placeholder = "(required)" >
            </div>

        </div>
       
        <hr>
        <br>    

        <div class= "form-group row">

            <div class = "col-xs-1"> </div>   
            <!-- space holder for formatting --> 
    
            <div class="col-xs-2">    
                <p class = "labels"> Discount </p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="discount" name = "discount" type="number" step = 0.01 placeholder = "(required)">

            </div>

            <div class="col-xs-1">
                <p class = "labels">$</p>
            </div>   

            <div class="col-xs-2">
                <p class = "labels"> Rebate </p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="rebate" name = "rebate" type="number" step = 0.01 placeholder = "(required)" >
            </div>

            <div class="col-xs-1">
                <p class = "labels">$</p>
            </div>

            <div class = "col-xs-1"> </div>  

        </div>
 
  
        <div class= "form-group row">
    
            <div class = "col-xs-1"> </div>
            <!-- space holder for formatting --> 
            <div class="col-xs-2">
                <p class = "labels"> Down Payment </p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="downpayment" name = "downpayment" type="number" step = 0.01 placeholder = "(required)">
            </div>

            <div class="col-xs-1">
                <p class = "labels">%</p>
            </div> 
    
            <div class="col-xs-2">
                <p class = "labels"> Interest </p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="interest" name = "interest" type="number" step = 0.01 placeholder = "(required)" >
            </div>

            <div class="col-xs-1">
                <p class = "labels">%</p>
            </div>   

            <div class = "col-xs-1"> </div>  
    
        </div>    


        <div class= "form-group row">

            <div class = "col-xs-1"> </div>    
            <!-- space holder for formatting --> 
            <div class="col-xs-2">
                <p class = "labels"> # of Months</p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="number_months" name = "number_months" type="number" step = 0.01 placeholder = "(required)" >
            </div>

            <div class="col-xs-1">
                <p class = "labels">#</p>
            </div>       
 
            <div class="col-xs-2">
                <p class = "labels"> Miles per year </p>
            </div>
    
            <div class="col-xs-2">
                <input class="form-control" id="mile_per_year" name = "mile_per_year" type="number" step = 0.01 placeholder = "(required)" >
            </div>

            <div class="col-xs-1">
                <p class = "labels">miles</p>
            </div>  

            <div class = "col-xs-1"> </div>  
    
        </div>    

        <hr>

        <div class= "form-group row">
    
            <div class ="col-xs-3"> </div>

            <div class ="col-xs-3">
                <p class = "labels">Gas price per gallon</p>
            </div>
                
            <div class ="col-xs-2">
                <input class="form-control" id="price_per_gallon" name = "price_per_gallon" type="number" step = 0.01 placeholder = "(required)" required>
            </div>
    
            <div class="col-xs-1">
                <p class = "labels">$</p>
            </div>  
    
            <div class ="col-xs-4"></div>

        </div>
    
        <hr>
    
        <div class= "form-group row">

            <div class="col-xs-10"></div>

            <div class="col-xs-1">
                <button type="button" onclick="reset_func()" class="btn btn-default">Reset</button>
            </div>

            <div class="col-xs-1">
                <input type="submit" class="btn btn-primary" value="submit">
            </div>
        </div>
    </form>

    <div id = "dynamic">
        <div class= "form-group row">
            <div class="col-xs-10"></div>

            <div class="col-xs-1">
                <button type="button" onclick="reset_func()" class="btn btn-default">Reset</button>
            </div>
                    
            <div class="col-xs-1"></div>
        </div>
                 
        <br>
                 
        <table class="table table-hover">
                   
            <tr>
                <th>mile per gallon\car price ($)</th>
                <th id = "car_p1">price 1</th>
                <th id = "car_p2">price 2</th>
                <th id = "car_p3">price 3</th>
                <th id = "car_p4">price 4</th>
                <th id = "car_p5">price 5</th>
            </tr>
                    
            <tr>
                <th id = "mpg1"> mpg 1</th>
                <td id = "m1c1"> </td>
                <td id = "m1c2"> </td>
                <td id = "m1c3"> </td>
                <td id = "m1c4"> </td>
                <td id = "m1c5"> </td>
            </tr>
                    
            <tr>
                <th id = "mpg2"> mpg 2</th>
                <td id = "m2c1"> </td>
                <td id = "m2c2"> </td>
                <td id = "m2c3"> </td>
                <td id = "m2c4"> </td>
                <td id = "m2c5"> </td>
            </tr>
                        
            <tr>
                <th id = "mpg3"> mpg 3</th>
                <td id = "m3c1"> </td>
                <td id = "m3c2"> </td>
                <td id = "m3c3"> </td>
                <td id = "m3c4"> </td>
                <td id = "m3c5"> </td>
            </tr>
                    
            <tr>
                <th id = "mpg4"> mpg 4</th>
                <td id = "m4c1"> </td>
                <td id = "m4c2"> </td>
                <td id = "m4c3"> </td>
                <td id = "m4c4"> </td>
                <td id = "m4c5"> </td>
            </tr>
                    
            <tr>
                <th id = "mpg5"> mpg 5</th>
                <td id = "m5c1"> </td>
                <td id = "m5c2"> </td>
                <td id = "m5c3"> </td>
                <td id = "m5c4"> </td>
                <td id = "m5c5"> </td>
            </tr>
        </table> 
                
        <p>
            * resulting cells represent cost per mile($), cost per month($) pairs
        </p>                 
    </div>                 
</div>
<script>
 
    jQuery.validator.setDefaults({
        debug: true,
        success: "valid"
    });

    $( "#myform" ).validate({
    rules: {
        car_1: { 
            required: true,
            min: 999,
            max: 999999
        },
        car_2: {
            required: true,
            min: 999,
            max: 999999
        },
        car_3: {
            required: true,
            min: 999,
            max: 999999
        },
        car_4: {
            required: true,
            min: 999,
            max: 999999
        },
        car_5: {
            required: true,
            min: 999,
            max: 999999
        },
        mpg_1: {
            required: true,
            min: 1,
            max: 40
        },
        mpg_2: {
            required: true,
            min: 1,
            max: 40
        },
        mpg_3: {
            required: true,
            min: 1,
            max: 40
        },
        mpg_4: {
            required: true,
            min: 1,
            max: 40
        },
        mpg_5: {
            required: true,
            min: 1,
            max: 40
        },
        downpayment: {
            required: true,
            min: 0
        },
        rebate: {
            required: true,
            min: 0
        },
        discount: {
            required: true,
            min: 0
        },
        interest: {
            required: true,
            min: 0
        },
        number_months: {
            required: true,
            min: 0
        },
        mile_per_year: {
            required: true,
            min: 0
        },
        price_per_gallon: {
            required: true,
            min: 0.05,
            max: 10.00
        }
    },
    messages: {
       car_1: {
           required: "Price is required!",
           min: "Please enter value > 999",
           max: "Please enter value < 999999"
       }, 
       car_2: {
           required: "Price is required!",
           min: "Please enter value > 999",
           max: "Please enter value < 999999"
       },
       car_3: {
           required: "Price is required!",
           min: "Please enter value > 999",
           max: "Please enter value < 999999"
       },
       car_4: {
           required: "Price is required!",
           min: "Please enter value > 999",
           max: "Please enter value < 999999"
       },
       car_5: {
           required: "Price is required!",
           min: "Please enter value > 999",
           max: "Please enter value < 999999"
        },
        mpg_1: {
           required: "MPG is required!",
           min: "Please enter value > 1",
           max: "Please enter value < 40"
        },
        mpg_2: {
           required: "MPG is required!",
           min: "Please enter value > 1",
           max: "Please enter value < 40"
        },
        mpg_3: {
           required: "MPG is required!",
           min: "Please enter value > 1",
           max: "Please enter value < 40"
        },
        mpg_4: {
           required: "MPG is required!",
           min: "Please enter value > 1",
           max: "Please enter value < 40"
        },
        mpg_5: {
           required: "MPG is required!",
           min: "Please enter value > 1",
           max: "Please enter value < 40"
        },
        downpayment: {
           required: "Downpayment is required",
           min: "Please enter value > 0"
        },
        rebate: {
           required: "Rebate is required",
           min: "Please enter value > 0"
        },
        discount: {
           required: "Discount is required",
           min: "Please enter value > 0"
        },
        interest: {
           required: "Interest is required",
           min: "Please enter value > 0"
        },
        number_months: {
           required: "# of months is required",
           min: "Please enter value > 0"
        },
        mile_per_year: {
           required : "mile/year is required",
           min: "Please enter value > 0"
        },
        price_per_gallon: {
            required: "price/ gallon is required",
            min: "Please enter value > 0.05",
            max: "Please enter value < 10.00"
        }
        }
    });


$('#myform').submit(function(evt) {
    evt.preventDefault();
    if( $('#myform').valid() ) {
       show_();
    } else {
    }
 });

/*function calculate and show comparison table*/
function show_() {
    
    var car_prices_ = car_prices();
    var mpgs_ = mpgs();
    var inputs = get_inputs();

    var mncn = new Array(5);
    
    for (var k = 0; k < 5; k++) {
        mncn[k] = new Array(5);
    }
    
    var i = 0;
    var j = 0;
    
    for (;i < 5; i ++){
        for (j = 0; j < 5; j ++) {
            mncn[i][j] = calculate_results(Number(inputs[0]), Number(inputs[1]), Number(inputs[2]), Number(inputs[3]), Number(inputs[4]), Number(inputs[5]), Number(mpgs_[i]),Number(car_prices_[j]));
        }
    }
    
    var a = 1;
    var b = 1;
    
    for (; a < 6; a ++ ) {
        for (b = 1; b < 6; b ++){
            document.getElementById("m"+a+"c"+b).innerHTML = mncn[a-1][b-1][0] + ", "+ mncn[a-1][b-1][1];          
        }
    }

    var e2 = document.getElementById("dynamic");
    e2.style.display = 'block'; 
    
    var e1 = document.getElementById("myform");
    e1.style.display = 'none';

}
/*function calculate and show comparison table*/

        
/*function get all car prices from input, return as an array*/
function car_prices() {
    var car_p1 = document.getElementById("car_1").value;
    var car_p2 = document.getElementById("car_2").value;
    var car_p3 = document.getElementById("car_3").value;
    var car_p4 = document.getElementById("car_4").value;
    var car_p5 = document.getElementById("car_5").value;

    var c1 = document.getElementById("car_p1").innerHTML = car_p1;
    var c2 = document.getElementById("car_p2").innerHTML = car_p2;
    var c3 = document.getElementById("car_p3").innerHTML = car_p3;
    var c4 = document.getElementById("car_p4").innerHTML = car_p4;
    var c5 = document.getElementById("car_p5").innerHTML = car_p5;
    
    return [c1, c2, c3, c4, c5];
}
/*function get all car prices from input, return as an array*/

/*function get all mpgs from input, return as an array*/
function mpgs() {
    var mpg_1 = document.getElementById("mpg_1").value;
    var mpg_2 = document.getElementById("mpg_2").value;
    var mpg_3 = document.getElementById("mpg_3").value;
    var mpg_4 = document.getElementById("mpg_4").value;
    var mpg_5 = document.getElementById("mpg_5").value;
            
    var m1 = document.getElementById("mpg1").innerHTML = mpg_1;
    var m2 = document.getElementById("mpg2").innerHTML = mpg_2;
    var m3 = document.getElementById("mpg3").innerHTML = mpg_3;
    var m4 = document.getElementById("mpg4").innerHTML = mpg_4;
    var m5 = document.getElementById("mpg5").innerHTML = mpg_5;
    
    return [m1, m2, m3, m4, m5];
}
/*function get all mpgs from input, return as an array*/
        
/*function get all other elements from input, return as an array*/
function get_inputs(){
    var discount = document.getElementById("discount").value;
    var rebate = document.getElementById("rebate").value;
    var number_months = document.getElementById("number_months").value;
    var downpayment = document.getElementById("downpayment").value;
    var interest = document.getElementById("interest").value;
    var mile_per_year = document.getElementById("mile_per_year").value;
    
    return [discount, rebate, downpayment, interest, number_months, mile_per_year];
}
/*function get all other elements from input, return as an aray*/
        
/*function calculate cost per mile and cost per month, return as pair*/
function calculate_results(discount, rebate, downpayment, interest, number_months, mile_per_year, mpg, msrp) {

    var gas_price = document.getElementById("price_per_gallon").value;     
    var down_payment = (msrp - discount - rebate)*(downpayment*0.01);
    var cost_after_down_payment = (msrp - discount - rebate) - down_payment;
    var cost_per_month_after_down_payment = ((interest*0.01/12)*cost_after_down_payment)/(1 - Math.pow((1 + interest*0.01/12),(-number_months)));
    
    cost_per_month = cost_per_month_after_down_payment + down_payment/Number(number_months) + mile_per_year/12/mpg*gas_price;
    
    var total_cost = cost_per_month_after_down_payment*Number(number_months) + down_payment;
        
    cost_per_mile = Number(total_cost)/Number(mile_per_year) + gas_price/Number(mpg);
    cost_per_month = Number(cost_per_month).toFixed(2);
    cost_per_mile = Number(cost_per_mile).toFixed(2); 
            
    return [cost_per_mile, cost_per_month];
}
/*function calculate cost per mile and cost per month, return as pair*/

/*function that reset the display*/
function reset_func() {
    var e1 = document.getElementById("myform");
    e1.style.display = 'block';
    
    document.getElementById("myform").reset();
    var e1 = document.getElementById("dynamic");
    e1.style.display = 'none';
}
/*function that reset the display*/
   
    
</script>
</body>
</html>
